CREATE TABLE RECEITAS (
    ID_RECEITA INT,
    NOME VARCHAR (50),
    TEMPO_PREPARO INT,
    PRIMARY KEY (ID_RECEITA)
);

CREATE TABLE PRODUTO (
    ID_PRODUTO INT,
    DESCRICAO VARCHAR (300),
    PRIMARY KEY (ID_PRODUTO)
);

CREATE TABLE INGREDIENTES (
    ID_RECEITA INT,
    ID_INGRED INT,
    ID_PRODUTO INT,
    QUANTIDADE INT,
    PRIMARY KEY (ID_INGRED),
    FOREIGN KEY (ID_RECEITA) REFERENCES RECEITAS (ID_RECEITA),
    FOREIGN KEY (ID_PRODUTO) REFERENCES PRODUTO (ID_PRODUTO)
);

INSERT INTO RECEITAS (
    ID_RECEITA,
    NOME,
    TEMPO_PREPARO
) VALUES(
    0001,
    'Pudim',
    8
),
(
    0002,
    'Bolo',
    2
),
(
    0003,
    'Omelete',
    1
) INSERT INTO PRODUTO (
    ID_PRODUTO,
    DESCRICAO
) VALUES(
    0001,
    'Leite Condensado'
),
(
    0002,
    'Amido de Milho'
),
(
    0003,
    'Leite'
),
(
    0004,
    'AÃ§ucar'
),
(
    0005,
    'Manteiga'
),
(
    0006,
    'Ovo'
) INSERT INTO INGREDIENTES (
    ID_RECEITA,
    ID_INGRED,
    ID_PRODUTO,
    QUANTIDADE
) VALUES(
    0001,
    1000,
    0001,
    1
) INSERT INTO INGREDIENTES (
    ID_RECEITA,
    ID_INGRED,
    ID_PRODUTO,
    QUANTIDADE
) VALUES(
    0001,
    2000,
    0002,
    2
) INSERT INTO INGREDIENTES (
    ID_RECEITA,
    ID_INGRED,
    ID_PRODUTO,
    QUANTIDADE
) VALUES(
    0001,
    3000,
    0003,
    1
) INSERT INTO INGREDIENTES (
    ID_RECEITA,
    ID_INGRED,
    ID_PRODUTO,
    QUANTIDADE
) VALUES(
    0002,
    4000,
    0001,
    2
) INSERT INTO INGREDIENTES (
    ID_RECEITA,
    ID_INGRED,
    ID_PRODUTO,
    QUANTIDADE
) VALUES(
    0002,
    5000,
    0005,
    2
) INSERT INTO INGREDIENTES (
    ID_RECEITA,
    ID_INGRED,
    ID_PRODUTO,
    QUANTIDADE
) VALUES(
    0003,
    6000,
    0001,
    4
)
    SELECT
        *
    FROM
        INGREDIENTES;

SELECT
    *
FROM
    PRODUTO;

SELECT
    *
FROM
    RECEITAS;

SELECT
    NOME,
    COUNT (*) AS TOTALINGREDIENTES
FROM
    RECEITAS     R,
    INGREDIENTES I
WHERE
    R.ID_RECEITA = I.ID_RECEITA
GROUP BY
    NOME;

SELECT
    DESCRICAO,
    COUNT (*) AS TOTALRECEITAS
FROM
    RECEITAS     R,
    PRODUTO      P,
    INGREDIENTES I
WHERE
    R.ID_RECEITA = I.ID_RECEITA
    AND I.ID_PRODUTO = CODIGO
GROUP BY
    DESCRICAO;

SELECT
    DESCRICAO,
    COUNT (*) AS TOTALRECEITAS
FROM
    RECEITAS     R,
    INGREDIENTES I,
    PRODUTO      P
WHERE
    R.ID_RECEITA = I.ID_RECEITA
    AND I.ID_PRODUTO = CODIGO
GROUP BY
    DESCRICAO
HAVING
    COUNT (*) > 1;